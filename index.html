<!DOCTYPE html>
<html>
<head>
  <title>REPPP Live Schedule</title>
<style>
  body {
    background: #2a3284;
    color: white;
    font-family: sans-serif;
    text-align: center;
    margin: 0;
    padding: 0;
  }
  #logo {
    display: block;
    margin: 20px auto 10px auto;
    width: 400px;
  }
  #heading {
    margin-top: 110;
  }
  table {
    margin: 30px auto;
    border-collapse: collapse;
    width: 90%;
  }
  th, td {
    border: 5px solid white;
    padding: 10px;
    text-align: center;
  }
  th {
    background-color: #2a3284;
  }
  #brandingVideo {
    display: none;
    width: 100%;
    max-width: 100%;
    margin-top: 0px;
  }
</style>

</head>
<body>
  <!-- Logo -->
  <img id="logo" src="REPPP white& blue logo.png" alt="REPPP Logo" />
  <h1 id="heading">Padel 1 Booking Schedule</h1>
  
  <!-- Schedule Table -->
  <table id="schedule">
    <tr><th>S.No</th><th>Time Slot</th><th>Booking Name</th></tr>
  </table>

  <video id="brandingVideo" autoplay muted>
  <source src="branding.mp4" type="video/mp4">
  Your browser does not support the video tag.
</video>


  <script>
  const apiUrl = 'https://script.google.com/macros/s/AKfycbyW2OZjXPjbkgl9mFYHHPWGS2Toopm4mJMS9JTVE0shgokxlK3--qSiF9mPTAURCCBzgw/exec';
  const video = document.getElementById('brandingVideo');
  let scheduleInterval;
  let resumeTime = 0;

  async function loadData() {
    const res = await fetch(apiUrl);
    const data = await res.json();

    const table = document.getElementById('schedule');
    data.forEach(row => {
      const tr = document.createElement('tr');
      tr.innerHTML = `<td>${row.S.No}</td><td>${row.time}</td><td>${row.name}</td>`;
      table.appendChild(tr);
    });
  }

  function refreshSchedule() {
    document.getElementById('schedule').innerHTML = `<tr><th>S.No</th><th>Time Slot</th><th>Booking Name</th></tr>`;
    loadData();
  }

  function showSchedule() {
    document.getElementById('logo').style.display = 'block';
    document.getElementById('heading').style.display = 'block';
    document.getElementById('schedule').style.display = 'table';
    document.getElementById('brandingVideo').style.display = 'none';
  }
    
  function showBrandingVideo() {
    document.getElementById('logo').style.display = 'none';
    document.getElementById('heading').style.display = 'none';
    document.getElementById('schedule').style.display = 'none';
    document.getElementById('brandingVideo').style.display = 'block';

    video.currentTime = resumeTime;
    video.play();
  }

  function startCycle() {
    // Show schedule for 2 minutes
    showSchedule();
    refreshSchedule();
    scheduleInterval = setInterval(refreshSchedule, 10000);

    setTimeout(() => {
      clearInterval(scheduleInterval);

      // Pause schedule and show branding for 1 minute
      resumeTime = video.currentTime;
      showBrandingVideo();

      setTimeout(() => {
        // Back to schedule
        resumeTime = video.currentTime;
        video.pause();
        startCycle(); // restart the cycle
      }, 1 * 60 * 3000); // 1 minute for branding

    }, 2 * 60 * 200); // 2 minutes for schedule
  }

  // Initial start
  startCycle();
</script>
</body>
</html>
